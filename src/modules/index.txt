
оы код слай

const track = document.querySelector('.carousel-track') // Получаем трек слайдов
let slides = Array.from(track.children) // Массив слайдов
const nextBtn = document.querySelector('.carousel-btn.next') // Кнопка "вперед"
const prevBtn = document.querySelector('.carousel-btn.prev') // Кнопка "назад"

let index = 1 // Текущий слайд (начинаем со второго элемента из-за клона)
let intervalId // Идентификатор интервала для автопрокрутки
const slideCount = slides.length // Количество оригинальных слайдов

class Slider {
  constructor() {
    // Дублируем первый и последний слайд для бесконечного цикла
    const firstClone = slides[0].cloneNode(true)
    const lastClone = slides[slideCount - 1].cloneNode(true)
    track.appendChild(firstClone)
    track.insertBefore(lastClone, slides[0])
  }
}
slides = Array.from(track.children)

// Устанавливаем стартовую позицию (на первый оригинальный)
track.style.transform = `translateX(-${index * 100}%)`

// Обновление позиции
function moveToSlide() {
  track.style.transition = 'transform 0.5s ease-in-out'
  track.style.transform = `translateX(-${index * 100}%)`
}

// Проверка, не на клоне ли мы (для плавного loop)
track.addEventListener('transitionend', () => {
  if (slides[index].equals(firstClone)) {
    track.style.transition = 'none'
    index = 1
    track.style.transform = `translateX(-${index * 100}%)`
  }
  if (slides[index].equals(lastClone)) {
    track.style.transition = 'none'
    index = slideCount
    track.style.transform = `translateX(-${index * 100}%)`
  }
})

// Кнопки
nextBtn.addEventListener('click', () => {
  if (index >= slides.length - 1) return
  index++
  moveToSlide()
})

prevBtn.addEventListener('click', () => {
  if (index <= 0) return
  index--
  moveToSlide()
})

// Автопрокрутка
function startAutoSlide() {
  intervalId = setInterval(() => {
    index++
    moveToSlide()
  }, 4000)
}

function stopAutoSlide() {
  clearInterval(intervalId)
}

startAutoSlide()

// Свайпы (мобильные)
let startX = 0
track.addEventListener('touchstart', (e) => {
  startX = e.touches[0].clientX
  stopAutoSlide()
})
track.addEventListener('touchend', (e) => {
  const endX = e.changedTouches[0].clientX
  if (startX - endX > 50) nextBtn.click()
  else if (endX - startX > 50) prevBtn.click()
  startAutoSlide()
})

export default Slider
